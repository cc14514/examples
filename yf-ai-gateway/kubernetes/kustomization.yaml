# Copyright(c) 2024 Beijing Yingfei Networks Technology Co.Ltd. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ai-gateway-system

resources:
  - namespace.yaml
  - ai-gateway-configmap.yaml
  - ai-gateway-deploy.yaml
  - bfe-configmap.yaml
  - bfe-deploy.yaml
  - mysql-deploy.yaml
  - redis-deploy.yaml
  - service-controller-deploy.yaml

# Centralized image override.
#
# Mirror usage:
# - Replace `newName` with your mirror registry/repo path, and optionally set `newTag`.
# - `name` MUST match the image name used in the YAML resources (without the tag).
#
# Example (ghcr -> ghcr.nju.edu.cn):
#   - name: ghcr.io/bfenetworks/bfe
#     newName: ghcr.nju.edu.cn/bfenetworks/bfe
#     newTag: v1.8.0-debug
images:
  - name: ghcr.io/bfenetworks/bfe
    newName: ghcr.nju.edu.cn/cc14514/bfe
    # newName: ghcr.nju.edu.cn/bfenetworks/bfe
    newTag: latest

  - name: ghcr.io/yf-networks/ai-gateway-api
    newName: ghcr.nju.edu.cn/cc14514/ai-gateway-api
    # newName: ghcr.nju.edu.cn/bfenetworks/ai-gateway
    newTag: latest

  - name: ghcr.io/bfenetworks/service-controller
    newName: ghcr.nju.edu.cn/bfenetworks/service-controller
    # newName: ghcr.nju.edu.cn/bfenetworks/service-controller
    newTag: latest

  # ghcr.io/servercontainers/mysql:latest
  - name: ghcr.io/cc14514/mysql 
    newName: ghcr.nju.edu.cn/cc14514/mysql 
    # newName: ghcr.nju.edu.cn/cc14514/mysql
    newTag: "8"

  - name: ghcr.io/cc14514/redis
    newName: ghcr.nju.edu.cn/cc14514/redis
    newTag: "6.2"
